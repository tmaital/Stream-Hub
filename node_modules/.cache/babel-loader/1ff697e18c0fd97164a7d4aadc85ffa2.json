{"ast":null,"code":"import _objectSpread from\"/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import moment from\"moment\";import{withTranslation}from'react-i18next';import'./feed-item.css';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faShareSquare,faUser,faStar,faFlag}from'@fortawesome/free-regular-svg-icons';import{faShareSquare as solidShare,faUser as solidUser,faStar as solidStar,faFlag as solidFlag}from'@fortawesome/free-solid-svg-icons';import*as firebase from\"firebase/app\";import\"firebase/auth\";import fire from\"../fire\";//required!\n//{props.feed.itemTitle}\nvar FeedItem=/*#__PURE__*/function(_Component){_inherits(FeedItem,_Component);var _super=_createSuper(FeedItem);function FeedItem(props){var _this;_classCallCheck(this,FeedItem);_this=_super.call(this,props);_this.state={catColor:\"rgba(20, 20, 255, 0.65)\",save:_this.props.userData.savedItems?_this.props.userData.savedItems.includes(_this.props.feed.itemID)?true:false:false,share:false,host:false,report:false,views:Math.ceil(_this.props.feed.itemTitle.length*_this.props.feed.itemTitle.length/100*1.5)};_this.handleSave=_this.handleSave.bind(_assertThisInitialized(_this));_this.handleShare=_this.handleShare.bind(_assertThisInitialized(_this));_this.handleHost=_this.handleHost.bind(_assertThisInitialized(_this));_this.handleReport=_this.handleReport.bind(_assertThisInitialized(_this));return _this;}_createClass(FeedItem,[{key:\"componentDidMount\",value:function componentDidMount(){var itemCategoryArr=eval(this.props.feed.itemTags);var itemCategory=itemCategoryArr[0];if(itemCategory===\"kids\"){this.setState({catColor:\"rgba(241, 49, 255, 0.65)\"});}else if(itemCategory===\"lectures\"){this.setState({catColor:\"rgba(158, 120, 228, 0.65)\"});}else if(itemCategory===\"fitness\"){this.setState({catColor:\"rgba(91, 178, 206, 0.65)\"});}else if(itemCategory===\"fun\"){this.setState({catColor:\"rgba(32, 212, 159, 0.65)\"});}else if(itemCategory===\"other\"){this.setState({catColor:\"rgba(51, 190, 46, 0.65)\"});}}},{key:\"handleSave\",value:function handleSave(){var _this2=this;if(this.props.isLoggedIn&&this.props.userData.savedItems&&!this.props.userData.savedItems.includes(this.props.feed.itemID)){var savedItemsArr=this.props.userData.savedItems.split(',');savedItemsArr.push(this.props.feed.itemID);var SaveList=savedItemsArr.join(',');this.props.setUserData(function(prevState){return _objectSpread({},prevState,{savedItems:SaveList});});firebase.auth().currentUser.updateProfile({photoURL:SaveList});console.log(\"Original Firebase List:\",firebase.auth().currentUser.photoURL);console.log(\"Original List:\",this.props.userData.savedItems);console.log(\"Array:\",savedItemsArr);console.log(\"New List:\",SaveList);console.log(\"SAVE:\",this.props.userData.savedItems.includes(this.props.feed.itemID));}else if(this.props.isLoggedIn&&!this.props.userData.savedItems){this.props.setUserData(function(prevState){return _objectSpread({},prevState,{savedItems:\",\"+_this2.props.feed.itemID});});firebase.auth().currentUser.updateProfile({photoURL:\",\"+this.props.feed.itemID});}else if(this.props.isLoggedIn){var unSavedList=this.props.userData.savedItems.replace(\",\"+this.props.feed.itemID,\"\");this.props.setUserData(function(prevState){return _objectSpread({},prevState,{savedItems:unSavedList});});firebase.auth().currentUser.updateProfile({photoURL:unSavedList});}}},{key:\"handleShare\",value:function handleShare(){var _this3=this;this.setState({share:true});var shareURL=\"https://www.facebook.com/sharer/sharer.php?u=\".concat(this.props.feed.itemURL);setTimeout(function(){window.open(shareURL,'_blank','location=yes,height=570,width=520,scrollbars=yes,status=yes');_this3.setState({share:false});},200);}},{key:\"handleHost\",value:function handleHost(){var _this4=this;this.setState({host:true});setTimeout(function(){window.open(_this4.props.feed.itemURL,'_blank','location=yes,height=570,width=520,scrollbars=yes,status=yes');_this4.setState({host:false});},200);}},{key:\"handleReport\",value:function handleReport(){var _this5=this;this.setState({report:true});setTimeout(function(){window.location=\"mailto:roigfrey@gmail.com\\n                      ?subject=streamHub: I would like to report Item #\".concat(_this5.props.feed.itemID,\"\\n                      &body=I would like to report the event \\\"\").concat(_this5.props.feed.itemTitle,\"\\\". please list the reason for reporting below:\");_this5.setState({report:false});},200);}},{key:\"render\",value:function render(){var t=this.props.t;var availableCats=[\"kids\",\"lectures\",\"fitness\",\"fun\"];var itemCategoryArr=eval(this.props.feed.itemTags);var itemCategory=itemCategoryArr&&availableCats.indexOf(itemCategoryArr[0])!==-1?itemCategoryArr[0]:\"other\";var timeObj=moment(this.props.feed.itemStartDateObj).format(\"DD/MM | HH:mm\");var timeEnd=moment(this.props.feed.itemStartDateObj).add(this.props.feed.itemDuration,\"seconds\").format(\"HH:mm\");var timeLabel=moment(this.props.feed.itemStartDateObj).format(t(\"momenttimelabel\"));var saveState=this.props.userData.savedItems?this.props.userData.savedItems.includes(this.props.feed.itemID)?solidStar:faStar:faStar;return/*#__PURE__*/React.createElement(\"div\",{className:\"feed-item\"},/*#__PURE__*/React.createElement(\"img\",{src:this.props.image,alt:\"Event\",className:t(\"lang\")===\"he\"?\"feed-item-img-rtl\":\"feed-item-img\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"feed-item-title\"},/*#__PURE__*/React.createElement(\"h2\",{onClick:function onClick(){return console.log(timeObj);},className:t(\"lang\")===\"he\"?\"feed-item-title-h2-rtl\":\"feed-item-title-h2\"},this.props.feed.itemTitle),/*#__PURE__*/React.createElement(\"h3\",null,\"\".concat(timeObj,\"-\").concat(timeEnd))),/*#__PURE__*/React.createElement(\"div\",{className:\"feed-item-timelabel\",style:{background:this.state.catColor}},/*#__PURE__*/React.createElement(\"h2\",null,timeLabel)),/*#__PURE__*/React.createElement(\"h2\",{className:\"feed-item-catlabel\"},t(itemCategory)),/*#__PURE__*/React.createElement(\"div\",{className:\"feed-item-description\"},/*#__PURE__*/React.createElement(\"p\",null,this.props.feed.itemDescription),/*#__PURE__*/React.createElement(\"a\",{href:this.props.feed.itemURL,target:\"_blank\",rel:\"noopener noreferrer\"},t(\"Link to Live Event\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"feed-item-icons\"},/*#__PURE__*/React.createElement(\"div\",{className:\"feed-item-icons-class\",onClick:this.handleSave,style:this.props.isLoggedIn?null:{color:\"#c7c7c7\"}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"feed-item-icons-class\",icon:saveState,size:\"lg\"}),/*#__PURE__*/React.createElement(\"h3\",null,t(\"Save\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"feed-item-icons-class\",onClick:this.handleShare},/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"feed-item-icons-class\",icon:this.state.share?solidShare:faShareSquare,size:\"lg\"}),/*#__PURE__*/React.createElement(\"h3\",null,t(\"Share\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"feed-item-icons-class\",onClick:this.handleReport},/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"feed-item-icons-class\",icon:this.state.report?solidFlag:faFlag,size:\"lg\"}),/*#__PURE__*/React.createElement(\"h3\",null,t(\"Report\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"feed-item-icons-counter\"},/*#__PURE__*/React.createElement(\"h2\",null,this.state.views),/*#__PURE__*/React.createElement(\"h3\",null,t(\"Views\")))));}}]);return FeedItem;}(Component);export default withTranslation()(FeedItem);","map":{"version":3,"sources":["/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/src/components/FeedItem.js"],"names":["React","Component","moment","withTranslation","FontAwesomeIcon","faShareSquare","faUser","faStar","faFlag","solidShare","solidUser","solidStar","solidFlag","firebase","fire","FeedItem","props","state","catColor","save","userData","savedItems","includes","feed","itemID","share","host","report","views","Math","ceil","itemTitle","length","handleSave","bind","handleShare","handleHost","handleReport","itemCategoryArr","eval","itemTags","itemCategory","setState","isLoggedIn","savedItemsArr","split","push","SaveList","join","setUserData","prevState","auth","currentUser","updateProfile","photoURL","console","log","unSavedList","replace","shareURL","itemURL","setTimeout","window","open","location","t","availableCats","indexOf","timeObj","itemStartDateObj","format","timeEnd","add","itemDuration","timeLabel","saveState","image","background","itemDescription","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport moment from \"moment\"\nimport { withTranslation } from 'react-i18next';\nimport './feed-item.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faShareSquare, faUser, faStar, faFlag } from '@fortawesome/free-regular-svg-icons'\nimport { faShareSquare as solidShare, faUser as solidUser, faStar as solidStar, faFlag as solidFlag } from '@fortawesome/free-solid-svg-icons'\nimport * as firebase from \"firebase/app\";\nimport \"firebase/auth\"\nimport fire from \"../fire\"; //required!\n\n\n//{props.feed.itemTitle}\n\nclass FeedItem extends Component{\n  constructor(props){\n    super(props)\n    this.state = {\n      catColor: \"rgba(20, 20, 255, 0.65)\",\n      save: this.props.userData.savedItems ? this.props.userData.savedItems.includes(this.props.feed.itemID) ? true : false : false,\n      share:false,\n      host: false,\n      report: false,\n      views: Math.ceil(this.props.feed.itemTitle.length * this.props.feed.itemTitle.length / 100 * 1.5)\n\n    }\n  this.handleSave = this.handleSave.bind(this)\n  this.handleShare = this.handleShare.bind(this)\n  this.handleHost = this.handleHost.bind(this)\n  this.handleReport = this.handleReport.bind(this)\n  }\n\n  componentDidMount(){\n    const itemCategoryArr = eval(this.props.feed.itemTags)\n    const itemCategory = itemCategoryArr[0]\n    if(itemCategory === \"kids\"){this.setState({catColor: \"rgba(241, 49, 255, 0.65)\"})}\n    else if(itemCategory === \"lectures\"){this.setState({catColor: \"rgba(158, 120, 228, 0.65)\"})}\n    else if(itemCategory === \"fitness\"){this.setState({catColor: \"rgba(91, 178, 206, 0.65)\"})}\n    else if(itemCategory === \"fun\"){this.setState({catColor: \"rgba(32, 212, 159, 0.65)\"})}\n    else if(itemCategory === \"other\"){this.setState({catColor: \"rgba(51, 190, 46, 0.65)\"})}\n    } \n  \n  handleSave(){\n    if(this.props.isLoggedIn && \n      this.props.userData.savedItems && \n      !this.props.userData.savedItems.includes(this.props.feed.itemID)){\n        const savedItemsArr = this.props.userData.savedItems.split(',')\n        savedItemsArr.push(this.props.feed.itemID)\n        const SaveList = savedItemsArr.join(',')\n\n        this.props.setUserData(prevState => ({...prevState, savedItems: SaveList}))\n        firebase.auth().currentUser.updateProfile({photoURL: SaveList})\n        \n        console.log(\"Original Firebase List:\",firebase.auth().currentUser.photoURL) \n        console.log(\"Original List:\",this.props.userData.savedItems) \n        console.log(\"Array:\",savedItemsArr) \n        console.log(\"New List:\",SaveList) \n        console.log(\"SAVE:\",this.props.userData.savedItems.includes(this.props.feed.itemID))\n        \n      } else if(this.props.isLoggedIn && !this.props.userData.savedItems){\n        this.props.setUserData(prevState => ({...prevState, savedItems: \",\"+this.props.feed.itemID}))\n        firebase.auth().currentUser.updateProfile({photoURL: \",\"+this.props.feed.itemID})\n      } else if(this.props.isLoggedIn){\n      const unSavedList = this.props.userData.savedItems.replace(\",\"+this.props.feed.itemID, \"\")\n\n      this.props.setUserData(prevState => ({...prevState, savedItems: unSavedList}))\n      firebase.auth().currentUser.updateProfile({photoURL: unSavedList})\n    }\n  }\n\n  handleShare(){\n    this.setState({share: true})\n    const shareURL = `https://www.facebook.com/sharer/sharer.php?u=${this.props.feed.itemURL}`\n    setTimeout(() => {\n      window.open(shareURL, '_blank', 'location=yes,height=570,width=520,scrollbars=yes,status=yes')\n      this.setState({share: false})\n    }, 200);\n  }\n\n  handleHost(){\n    this.setState({host: true})\n    setTimeout(() => {\n      window.open(this.props.feed.itemURL, '_blank', 'location=yes,height=570,width=520,scrollbars=yes,status=yes')\n      this.setState({host: false})}, 200);\n  }\n\n  handleReport(){\n    this.setState({report: true})\n    setTimeout(() => {\n      window.location = `mailto:roigfrey@gmail.com\n                      ?subject=streamHub: I would like to report Item #${this.props.feed.itemID}\n                      &body=I would like to report the event \"${this.props.feed.itemTitle}\". please list the reason for reporting below:`\n                      this.setState({report: false})}, 200);\n  }\n\n  render(){  \n  \n    const { t } = this.props\n\n    const availableCats = [\"kids\",\"lectures\",\"fitness\",\"fun\"]\n    const itemCategoryArr = eval(this.props.feed.itemTags)\n    const itemCategory = itemCategoryArr && availableCats.indexOf(itemCategoryArr[0]) !== -1 ? itemCategoryArr[0] : \"other\"\n    const timeObj = moment(this.props.feed.itemStartDateObj).format(\"DD/MM | HH:mm\")\n    const timeEnd = moment(this.props.feed.itemStartDateObj).add(this.props.feed.itemDuration, \"seconds\").format(\"HH:mm\")\n    const timeLabel = moment(this.props.feed.itemStartDateObj).format(t(\"momenttimelabel\"))\n    const saveState = this.props.userData.savedItems ? this.props.userData.savedItems.includes(this.props.feed.itemID) ? solidStar : faStar : faStar\n\n    return (\n      <div className=\"feed-item\">\n          <img src={this.props.image} alt=\"Event\" className={t(\"lang\") === \"he\" ? \"feed-item-img-rtl\" :\"feed-item-img\"}/>\n          <div className=\"feed-item-title\">\n            <h2 onClick={() => console.log(timeObj)} className={t(\"lang\") === \"he\" ? \"feed-item-title-h2-rtl\" : \"feed-item-title-h2\"}>{this.props.feed.itemTitle}</h2>\n            <h3>{`${timeObj}-${timeEnd}`}</h3>\n          </div>\n          <div className=\"feed-item-timelabel\" style={{background: this.state.catColor}}>\n            <h2>{timeLabel}</h2>\n          </div>\n          <h2 className=\"feed-item-catlabel\">{t(itemCategory)}</h2>\n          <div className=\"feed-item-description\">\n            <p>{this.props.feed.itemDescription}</p>\n            <a href={this.props.feed.itemURL} target=\"_blank\" rel=\"noopener noreferrer\">{t(\"Link to Live Event\")}</a>\n          </div>\n          <div className=\"feed-item-icons\">\n            <div className=\"feed-item-icons-class\" onClick={this.handleSave} style={this.props.isLoggedIn ? null : {color:\"#c7c7c7\"}}>\n              <FontAwesomeIcon className=\"feed-item-icons-class\" icon={saveState} size=\"lg\" />\n              <h3>{t(\"Save\")}</h3>\n            </div>\n            <div className=\"feed-item-icons-class\" onClick={this.handleShare}>\n              <FontAwesomeIcon className=\"feed-item-icons-class\" icon={this.state.share ? solidShare : faShareSquare} size=\"lg\"/>\n              <h3>{t(\"Share\")}</h3>\n            </div>\n            {/* <div className=\"feed-item-icons-class\" onClick={this.handleHost} style={{color:\"#c7c7c7\"}}>\n              <FontAwesomeIcon className=\"feed-item-icons-class\" icon={this.state.host ? solidUser : faUser} size=\"lg\"/>\n              <h3>{t(\"View Host\")}</h3>\n            </div> */}\n            <div className=\"feed-item-icons-class\" onClick={this.handleReport}>\n              <FontAwesomeIcon className=\"feed-item-icons-class\" icon={this.state.report ? solidFlag : faFlag} size=\"lg\"/>\n              <h3>{t(\"Report\")}</h3>\n            </div>\n            <div className=\"feed-item-icons-counter\">\n              <h2>{this.state.views}</h2>\n              <h3>{t(\"Views\")}</h3>\n            </div>\n\n          </div>\n      </div>\n    )\n  }\n}\n\nexport default withTranslation()(FeedItem)"]},"metadata":{},"sourceType":"module"}