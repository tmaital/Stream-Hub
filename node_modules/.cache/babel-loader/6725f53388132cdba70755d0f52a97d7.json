{"ast":null,"code":"import _defineProperty from\"/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import\"./add-event-modal.css\";import{useTranslation}from'react-i18next';//import { loadReCaptcha } from 'react-recaptcha-v3'\nimport{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faFileUpload,faPlus,faTimes,faCheck}from\"@fortawesome/free-solid-svg-icons\";import moment from\"moment\";function AddEventModal(props){var _useState=useState({itemTitle:\"\",itemDuration:\"\",itemStartDateObj:\"\",itemURL:\"\",itemImgURL:\"\",itemTags:\"[]\",platformID:1}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState({date:\"\",startTime:\"\",endTime:\"\"}),_useState4=_slicedToArray(_useState3,2),date=_useState4[0],setDate=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isError=_useState6[0],setIsError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isErrorHighlight=_useState8[0],setIsErrorHighlight=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isImageLoad=_useState10[0],setIsImageLoad=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isImageDisplay=_useState12[0],setIsImageDisplay=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isImageError=_useState14[0],setIsImageError=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isSubmitted=_useState16[0],setIsSubmitted=_useState16[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setState(function(prevState){return _objectSpread({},prevState,_defineProperty({},name,value));});};var handleDateChange=function handleDateChange(event){var _event$target2=event.target,name=_event$target2.name,value=_event$target2.value,type=_event$target2.type;if(type===\"text\"&&date[name].length===2&&value.indexOf(\":\")===-1){setDate(function(prevState){return _objectSpread({},prevState,_defineProperty({},name,\"\".concat(value.slice(0,2),\":\").concat(value.slice(2,4))));});}else{//if(type === \"text\" && date[name].length === 2){\nsetDate(function(prevState){return _objectSpread({},prevState,_defineProperty({},name,value));});}var duration=moment.duration(moment(date.endTime,\"HH:mm\").diff(moment(date.startTime,\"HH:mm\"))).asSeconds();var datetimeFormatted=\"\".concat(date.date.concat(\"T\",date.startTime));setState(function(prevState){return _objectSpread({},prevState,{itemDuration:duration,itemStartDateObj:datetimeFormatted});});console.log(date);};var handleDateClear=function handleDateClear(event){var name=event.target.name;if(event.key===\"Backspace\"){setDate(function(prevState){return _objectSpread({},prevState,_defineProperty({},name,\"\"));});}};var handleCategoryChange=function handleCategoryChange(event){var _event$target3=event.target,name=_event$target3.name,value=_event$target3.value;var categoryFormatted=\"['\".concat(value.toLowerCase(),\"']\");setState(function(prevState){return _objectSpread({},prevState,_defineProperty({},name,categoryFormatted));});};var handleShowImageUpload=function handleShowImageUpload(){setIsImageLoad(true);};var handleImageUpload=function handleImageUpload(event){var _event$target4=event.target,value=_event$target4.value,name=_event$target4.name,type=_event$target4.type;if(type===\"text\"){setState(function(prevState){return _objectSpread({},prevState,{itemImgURL:value});});}else if(name===\"upload\"&&state.itemImgURL){setIsImageLoad(false);setIsImageDisplay(true);}else if(name===\"upload\"){setIsImageError(true);}else if(name===\"cancel\"){setIsImageLoad(false);setIsImageDisplay(false);setState(function(prevState){return _objectSpread({},prevState,{itemImgURL:\"\"});});}else if(name===\"remove\"){setIsImageDisplay(false);setState(function(prevState){return _objectSpread({},prevState,{itemImgURL:\"\"});});}};var handleClose=function handleClose(event){if(event.target===event.currentTarget)props.handleHideAddEvent();};var handleSubmit=function handleSubmit(event){event.preventDefault();if(state.itemTitle&&state.itemDuration&&state.itemStartDateObj&&state.itemURL&&state.itemTags!=\"[]\"){console.log(\"All Items Complete!\");var myHeaders=new Headers();myHeaders.append(\"Content-Type\",\"application/json\");var raw=JSON.stringify(state);var requestOptions={method:'POST',headers:myHeaders,body:raw,redirect:'follow'};fetch(\"\".concat(window.baseUrl,\"items/\"),requestOptions).then(function(response){return response.text();}).then(function(result){return console.log(result);}).catch(function(error){return console.log('error',error);}).then(setIsSubmitted(true)).then(setTimeout(function(){setIsSubmitted(false);props.handleHideAddEvent();},2000));}else{setIsError(true);setIsErrorHighlight(true);setTimeout(function(){setIsErrorHighlight(false);},500);}};return/*#__PURE__*/React.createElement(\"div\",{className:\"modal-container\",name:\"mainmodal\",onClick:handleClose},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-container-window-parent\"},!isSubmitted?/*#__PURE__*/React.createElement(\"form\",{className:\"modal-container-window\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-close-button\",onClick:props.handleHideAddEvent},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTimes,size:\"1x\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-form-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-form-img\"},/*#__PURE__*/React.createElement(\"button\",{className:\"modal-form-img-button\",type:\"button\",onClick:handleShowImageUpload},t(\"Upload Photo\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"modal-form-img-button-icon\",icon:faFileUpload,size:\"2x\"})),isImageLoad?/*#__PURE__*/React.createElement(\"div\",{className:\"modal-form-img-popup\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-form-img-input-cont\"},/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",flexDirection:\"row\"}},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"www.photo-url.com/image.jpg\",onChange:handleImageUpload}),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",name:\"upload\",className:\"modal-form-img-input-cont-button-upload\",onClick:handleImageUpload},\"Upload\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",name:\"cancel\",className:\"modal-form-img-input-cont-button-cancel\",onClick:handleImageUpload},\"Cancel\")))):null),isImageDisplay?/*#__PURE__*/React.createElement(\"img\",{className:t(\"lang\")===\"he\"?\"temp-img-rtl\":\"temp-img\",alt:\"\",src:state.itemImgURL}):null,isImageDisplay?/*#__PURE__*/React.createElement(\"button\",{type:\"button\",name:\"remove\",className:\"modal-form-img-button-remove\",onClick:handleImageUpload},\"Remove\"):null,/*#__PURE__*/React.createElement(\"div\",{className:\"modal-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-form-inputs\"},/*#__PURE__*/React.createElement(\"h3\",null,/*#__PURE__*/React.createElement(\"span\",null,\"* \"),t(\"Tell us about your event\")),/*#__PURE__*/React.createElement(\"textarea\",{placeholder:t(\"Short description of your event...\"),maxLength:\"90\",name:\"itemTitle\",value:state.itemTitle,onChange:handleChange}),/*#__PURE__*/React.createElement(\"p\",null,state.itemTitle.length,\"/90\")),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-form-inputs\"},/*#__PURE__*/React.createElement(\"h3\",null,/*#__PURE__*/React.createElement(\"span\",null,\"* \"),t(\"When is it?\")),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-form-datetime\"},/*#__PURE__*/React.createElement(\"label\",null,t(\"Event Date\"),/*#__PURE__*/React.createElement(\"input\",{type:\"date\",name:\"date\",onKeyDown:handleDateClear,onChange:handleDateChange,value:date.date})),/*#__PURE__*/React.createElement(\"label\",null,t(\"Start Time\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",maxLength:\"5\",pattern:\"[0-9].{1,}:[0-9].{1,}\",title:\"12:34\",name:\"startTime\",placeHolder:\"12:30\",className:\"modal-form-datetime-time\",onKeyDown:handleDateClear,onChange:handleDateChange,value:date.startTime})),/*#__PURE__*/React.createElement(\"label\",null,t(\"End Time\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",maxLength:\"5\",pattern:\"[0-9].{1,}:[0-9].{1,}\",title:\"12:34\",name:\"endTime\",placeHolder:\"13:45\",className:\"modal-form-datetime-time\",onKeyDown:handleDateClear,onChange:handleDateChange,value:date.endTime})))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-form-inputs\"},/*#__PURE__*/React.createElement(\"h3\",null,/*#__PURE__*/React.createElement(\"span\",null,\"* \"),t(\"Enter your event's URL\")),/*#__PURE__*/React.createElement(\"input\",{name:\"itemURL\",type:\"text\",placeholder:\"www.amazing-event.com/live-video-url\",onChange:handleChange,value:state.itemURL})),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-form-categories\"},/*#__PURE__*/React.createElement(\"h3\",null,/*#__PURE__*/React.createElement(\"span\",null,\"* \"),t(\"Choose Category\")),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-form-categories-radio\"},/*#__PURE__*/React.createElement(\"label\",{className:\"modal-form-categories-radio-design\"},t(\"Kids\"),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",name:\"itemTags\",value:\"kids\",onChange:handleCategoryChange}),/*#__PURE__*/React.createElement(\"span\",{className:\"radio-checkmark\"})),/*#__PURE__*/React.createElement(\"label\",{className:\"modal-form-categories-radio-design\"},t(\"Lectures\"),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",name:\"itemTags\",value:\"lectures\",onChange:handleCategoryChange}),/*#__PURE__*/React.createElement(\"span\",{className:\"radio-checkmark\"})),/*#__PURE__*/React.createElement(\"label\",{className:\"modal-form-categories-radio-design\"},t(\"Fitness\"),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",name:\"itemTags\",value:\"fitness\",onChange:handleCategoryChange}),/*#__PURE__*/React.createElement(\"span\",{className:\"radio-checkmark\"})),/*#__PURE__*/React.createElement(\"label\",{className:\"modal-form-categories-radio-design\"},t(\"Fun\"),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",name:\"itemTags\",value:\"fun\",onChange:handleCategoryChange}),/*#__PURE__*/React.createElement(\"span\",{className:\"radio-checkmark\"})))))),isError?/*#__PURE__*/React.createElement(\"h4\",{style:{color:\"red\",fontWeight:isErrorHighlight?\"900\":\"200\"}},\"You must complete the form before submitting!\"):null,/*#__PURE__*/React.createElement(\"button\",{className:\"modal-submit-button\",type:\"submit\",onClick:handleSubmit},/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:t(\"lang\")===\"he\"?\"modal-submit-button-icon-rtl\":\"modal-submit-button-icon\",icon:faPlus,size:\"1x\"}),t(\"Add Event\"))):/*#__PURE__*/React.createElement(\"div\",{className:\"modal-container-window\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-form-container-login\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Event Added successfully!\"),/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faCheck,size:\"2x\"}))))));}export default AddEventModal;","map":{"version":3,"sources":["/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/src/components/AddEventModal.js"],"names":["React","useState","useTranslation","FontAwesomeIcon","faFileUpload","faPlus","faTimes","faCheck","moment","AddEventModal","props","itemTitle","itemDuration","itemStartDateObj","itemURL","itemImgURL","itemTags","platformID","state","setState","date","startTime","endTime","setDate","isError","setIsError","isErrorHighlight","setIsErrorHighlight","isImageLoad","setIsImageLoad","isImageDisplay","setIsImageDisplay","isImageError","setIsImageError","isSubmitted","setIsSubmitted","t","handleChange","event","target","name","value","prevState","handleDateChange","type","length","indexOf","slice","duration","diff","asSeconds","datetimeFormatted","concat","console","log","handleDateClear","key","handleCategoryChange","categoryFormatted","toLowerCase","handleShowImageUpload","handleImageUpload","handleClose","currentTarget","handleHideAddEvent","handleSubmit","preventDefault","myHeaders","Headers","append","raw","JSON","stringify","requestOptions","method","headers","body","redirect","fetch","window","baseUrl","then","response","text","result","catch","error","setTimeout","display","flexDirection","color","fontWeight"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\nimport \"./add-event-modal.css\"\nimport { useTranslation } from 'react-i18next'\n//import { loadReCaptcha } from 'react-recaptcha-v3'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faFileUpload, faPlus, faTimes, faCheck } from \"@fortawesome/free-solid-svg-icons\";\nimport moment from \"moment\"\n\nfunction AddEventModal(props){\n    \n    const [state, setState] = useState({\n        itemTitle:\"\",\n        itemDuration:\"\",\n        itemStartDateObj:\"\",\n        itemURL:\"\",\n        itemImgURL:\"\",\n        itemTags:\"[]\",\n        platformID:1\n    })\n    const [date, setDate] = useState({\n        date:\"\",\n        startTime:\"\",\n        endTime:\"\",\n    })\n    const [isError, setIsError] = useState(false)\n    const [isErrorHighlight, setIsErrorHighlight] = useState(false)\n    const [isImageLoad, setIsImageLoad] = useState(false)\n    const [isImageDisplay, setIsImageDisplay] = useState(false)\n    const [isImageError, setIsImageError] = useState(false)\n    const [isSubmitted, setIsSubmitted] = useState(false)\n\n\n    const { t } = useTranslation()\n\n    const handleChange = (event) => {\n        const {name, value} = event.target\n        setState(prevState => ({ ...prevState, [name]: value }))\n    }\n\n    const handleDateChange = (event) => {\n        const {name, value, type} = event.target\n\n        if(type === \"text\" && date[name].length === 2 && value.indexOf(\":\") === -1){\n            setDate(prevState => ({ ...prevState, [name]: `${value.slice(0, 2)}:${value.slice(2, 4)}` }))\n        } else { //if(type === \"text\" && date[name].length === 2){\n            setDate(prevState => ({ ...prevState, [name]: value }))\n        }\n        \n        const duration = moment.duration(moment(date.endTime,\"HH:mm\").diff(moment(date.startTime,\"HH:mm\"))).asSeconds()\n        const datetimeFormatted = `${date.date.concat(\"T\",date.startTime)}`\n        setState(prevState => ({ ...prevState, itemDuration: duration, itemStartDateObj: datetimeFormatted }))\n        console.log(date)   \n    }\n\n    const handleDateClear = (event) => {\n        const {name} = event.target\n        if(event.key === \"Backspace\"){\n            setDate(prevState => ({ ...prevState, [name]: \"\" }))\n        }\n    }\n\n    const handleCategoryChange = (event) => {\n        const {name, value} = event.target\n        const categoryFormatted = `['${value.toLowerCase()}']`\n        setState(prevState => ({ ...prevState, [name]: categoryFormatted }))\n    }\n\n    const handleShowImageUpload = () => {\n        setIsImageLoad(true)\n    }\n\n    const handleImageUpload = (event) => {\n        const {value, name, type} = event.target\n        if(type === \"text\") {\n            setState(prevState => ({ ...prevState, itemImgURL: value }))\n        } else if(name === \"upload\" && state.itemImgURL) {\n            setIsImageLoad(false)\n            setIsImageDisplay(true)\n        } else if (name === \"upload\") {\n            setIsImageError(true)\n        } else if(name === \"cancel\") {\n            setIsImageLoad(false)\n            setIsImageDisplay(false)\n            setState(prevState => ({ ...prevState, itemImgURL: \"\" }))\n        } else if(name === \"remove\") {\n            setIsImageDisplay(false)\n            setState(prevState => ({ ...prevState, itemImgURL: \"\" }))\n        }\n        \n    }\n\n\n    const handleClose = (event) => {\n        if(event.target === event.currentTarget) \n        props.handleHideAddEvent()\n    }\n\n    const handleSubmit = (event) => {\n        event.preventDefault()\n        if(state.itemTitle && \n           state.itemDuration && \n           state.itemStartDateObj && \n           state.itemURL && \n           state.itemTags != \"[]\"){\n               \n            console.log(\"All Items Complete!\")\n            var myHeaders = new Headers();\n            myHeaders.append(\"Content-Type\", \"application/json\")\n\n            var raw = JSON.stringify(state)\n\n            var requestOptions = {\n            method: 'POST',\n            headers: myHeaders,\n            body: raw,\n            redirect: 'follow'\n            }\n        \n            fetch(`${window.baseUrl}items/`, requestOptions)\n            .then(response => response.text())\n            .then(result => console.log(result))\n            .catch(error => console.log('error', error))\n            .then(setIsSubmitted(true))\n            .then(\n                setTimeout(() => {\n                    setIsSubmitted(false)\n                    props.handleHideAddEvent()\n                    }, 2000))\n        } else {\n            setIsError(true)\n            setIsErrorHighlight(true)\n            setTimeout(function(){ setIsErrorHighlight(false) }, 500);\n        }\n    }\n    \n    return(\n        <div className=\"modal-container\" name=\"mainmodal\" onClick={handleClose}>\n            <div className=\"modal-container-window-parent\">\n{!isSubmitted ? <form className=\"modal-container-window\">\n                    <div className=\"modal-close-button\" onClick={props.handleHideAddEvent}>\n                        <FontAwesomeIcon icon={faTimes} size=\"1x\"/>\n                    </div>\n                     <div className=\"modal-form-container\">\n                        <div className=\"modal-form-img\">\n                            <button className=\"modal-form-img-button\" type=\"button\" onClick={handleShowImageUpload}>{t(\"Upload Photo\")}<br/><br/>\n                            <FontAwesomeIcon className=\"modal-form-img-button-icon\" icon={faFileUpload} size=\"2x\"/>\n                            </button>\n                            {isImageLoad ? <div className=\"modal-form-img-popup\">\n                                <div className=\"modal-form-img-input-cont\">\n                                    <div style={{display: \"flex\",flexDirection: \"row\"}}>\n                                    <input type=\"text\" placeholder=\"www.photo-url.com/image.jpg\" onChange={handleImageUpload} />\n                                    <button type=\"button\" name=\"upload\" className=\"modal-form-img-input-cont-button-upload\" onClick={handleImageUpload}>Upload</button>\n                                    <button type=\"button\" name=\"cancel\" className=\"modal-form-img-input-cont-button-cancel\" onClick={handleImageUpload}>Cancel</button>\n                                    </div>\n                                </div>\n                            </div> : null}\n                        </div>  \n                        {isImageDisplay ? <img className={t(\"lang\") === \"he\" ? \"temp-img-rtl\" :\"temp-img\"} alt=\"\" src={state.itemImgURL}/> : null }\n                        {isImageDisplay ? <button type=\"button\" name=\"remove\" className=\"modal-form-img-button-remove\" onClick={handleImageUpload}>Remove</button> : null }\n                        <div className=\"modal-form\">\n                            <div className=\"modal-form-inputs\">\n                                <h3><span>* </span>{t(\"Tell us about your event\")}</h3>\n                                <textarea \n                                placeholder={t(\"Short description of your event...\")} \n                                maxLength=\"90\"\n                                name=\"itemTitle\"\n                                value={state.itemTitle}\n                                onChange={handleChange}\n                                />\n                                <p>{state.itemTitle.length}/90</p>\n                                \n                            </div>\n                            <div className=\"modal-form-inputs\">\n                                <h3><span>* </span>{t(\"When is it?\")}</h3>\n                                <div className=\"modal-form-datetime\" >\n                                    <label>\n                                        {t(\"Event Date\")}<input \n                                        type=\"date\" \n                                        name=\"date\" \n                                        onKeyDown={handleDateClear}\n                                        onChange={handleDateChange}  \n                                        value={date.date}\n                                    />\n                                    </label>\n                                    <label>\n                                        {t(\"Start Time\")}<input \n                                        type=\"text\" \n                                        maxLength=\"5\"\n                                        pattern=\"[0-9].{1,}:[0-9].{1,}\" \n                                        title=\"12:34\"\n                                        name=\"startTime\" \n                                        placeHolder=\"12:30\" \n                                        className=\"modal-form-datetime-time\" \n                                        onKeyDown={handleDateClear}\n                                        onChange={handleDateChange} \n                                        value={date.startTime}\n                                    />\n                                    </label>\n                                    <label>\n                                    {t(\"End Time\")}<input \n                                        type=\"text\" \n                                        maxLength=\"5\"\n                                        pattern=\"[0-9].{1,}:[0-9].{1,}\" \n                                        title=\"12:34\"\n                                        name=\"endTime\" \n                                        placeHolder=\"13:45\" \n                                        className=\"modal-form-datetime-time\" \n                                        onKeyDown={handleDateClear}\n                                        onChange={handleDateChange} \n                                        value={date.endTime}\n                                    />\n                                    </label>\n                                </div>\n                            </div>\n\n                            <div className=\"modal-form-inputs\">\n                                <h3><span>* </span>{t(\"Enter your event's URL\")}</h3>\n                                <input \n                                    name=\"itemURL\" \n                                    type=\"text\" \n                                    placeholder=\"www.amazing-event.com/live-video-url\"\n                                    onChange={handleChange}\n                                    value={state.itemURL}\n                                />\n                            </div>\n                            <div className=\"modal-form-categories\">\n                                <h3><span>* </span>{t(\"Choose Category\")}</h3>\n                                <div className=\"modal-form-categories-radio\">\n                                    <label className=\"modal-form-categories-radio-design\">{t(\"Kids\")}\n                                        <input type=\"radio\" \n                                            name=\"itemTags\" \n                                            value=\"kids\"\n                                            onChange={handleCategoryChange}/>\n                                        <span className=\"radio-checkmark\"></span>\n                                    </label>\n                                    <label className=\"modal-form-categories-radio-design\">{t(\"Lectures\")}\n                                        <input type=\"radio\" \n                                            name=\"itemTags\" \n                                            value=\"lectures\"\n                                            onChange={handleCategoryChange}/>\n                                        <span className=\"radio-checkmark\"></span>\n                                    </label>\n                                    <label className=\"modal-form-categories-radio-design\">{t(\"Fitness\")}\n                                        <input type=\"radio\" \n                                            name=\"itemTags\" \n                                            value=\"fitness\"\n                                            onChange={handleCategoryChange}/> \n                                        <span className=\"radio-checkmark\"></span>\n                                    </label>\n                                    <label className=\"modal-form-categories-radio-design\">{t(\"Fun\")}\n                                        <input type=\"radio\" \n                                            name=\"itemTags\" \n                                            value=\"fun\"\n                                            onChange={handleCategoryChange}/> \n                                        <span className=\"radio-checkmark\"></span>\n                                    </label>\n                                </div>\n                            </div>\n                        </div>\n                    </div> \n                    {isError ? <h4 style={{color:\"red\", fontWeight: isErrorHighlight ? \"900\" : \"200\"} }>You must complete the form before submitting!</h4> : null}\n                    <button className=\"modal-submit-button\" type=\"submit\" onClick={handleSubmit}>\n                        <FontAwesomeIcon className={t(\"lang\") === \"he\" ? \"modal-submit-button-icon-rtl\" : \"modal-submit-button-icon\"} icon={faPlus} size=\"1x\"/>\n                        {t(\"Add Event\")}\n                    </button>\n                </form>:\n                <div className=\"modal-container-window\">\n                    <div className=\"modal-form-container-login\">\n                        <div>\n                            <h2>Event Added successfully!</h2>\n                            <FontAwesomeIcon icon={faCheck} size=\"2x\"/>\n                        </div>\n                    </div>\n                </div>}\n            </div>\n        </div>\n    )\n}\n\nexport default AddEventModal\n\n\n"]},"metadata":{},"sourceType":"module"}