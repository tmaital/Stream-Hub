{"ast":null,"code":"import _slicedToArray from\"/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"./login-modal.css\";import{useTranslation}from'react-i18next';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faTimes,faCheck}from\"@fortawesome/free-solid-svg-icons\";import{faTwitter,faFacebookF,faGoogle}from\"@fortawesome/free-brands-svg-icons\";import*as firebase from\"firebase/app\";import\"firebase/auth\";import fire from\"../fire\";//required!\nfunction LoginModal(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),fireErrors=_useState2[0],setFireErrors=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoginLoading=_useState4[0],setIsLoginLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoginSuccess=_useState6[0],setIsLoginSuccess=_useState6[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var handleClose=function handleClose(event){if(event.target===event.currentTarget)props.handleHideLogin();};var handleCloseSuccess=function handleCloseSuccess(){setIsLoginSuccess(true);setTimeout(function(){setIsLoginSuccess(false);setIsLoginLoading(false);props.handleHideLogin();},1000);};var handleLoginFacebook=function handleLoginFacebook(){var provider=new firebase.auth.FacebookAuthProvider();setIsLoginLoading(true);firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(function(){firebase.auth().signInWithPopup(provider).then(function(result){var isNewUser=result.additionalUserInfo.isNewUser;if(isNewUser){firebase.auth().currentUser.updateProfile({photoURL:\"\"});}console.log(result);handleCloseSuccess();}).catch(function(e){return setFireErrors(e.message);});//.then(console.log(\"AuthErros:\",fireErrors)) \n});};var handleLoginTwitter=function handleLoginTwitter(){var provider=new firebase.auth.TwitterAuthProvider();setIsLoginLoading(true);firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(function(){firebase.auth().signInWithPopup(provider).then(function(result){var isNewUser=result.additionalUserInfo.isNewUser;if(isNewUser){firebase.auth().currentUser.updateProfile({photoURL:\"\"});}console.log(result);handleCloseSuccess();}).catch(function(e){return setFireErrors(e.message);});//.then(console.log(\"AuthErros:\",fireErrors))\n});};var handleLoginGoogle=function handleLoginGoogle(){var provider=new firebase.auth.GoogleAuthProvider();setIsLoginLoading(true);firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(function(){firebase.auth().signInWithPopup(provider).then(function(result){var isNewUser=result.additionalUserInfo.isNewUser;if(isNewUser){firebase.auth().currentUser.updateProfile({photoURL:\"\"});}console.log(result);handleCloseSuccess();}).catch(function(e){return setFireErrors(e.message);});//.then(console.log(\"AuthErros:\",fireErrors))  \n});};return/*#__PURE__*/React.createElement(\"div\",{className:\"modal-container-login\",name:\"mainmodal\",onClick:handleClose},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-container-window-parent-login\"},/*#__PURE__*/React.createElement(\"form\",{className:\"modal-container-window-login\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-close-button-login\",onClick:props.handleHideLogin},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTimes,size:\"1x\"})),!isLoginLoading?/*#__PURE__*/React.createElement(\"div\",{className:\"modal-form-container-login\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",name:\"facebook\",className:\"Social-login-button-facebook\",onClick:handleLoginFacebook},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faFacebookF,size:\"lg\"}),/*#__PURE__*/React.createElement(\"span\",{style:{paddingRight:40}},\"Login with Facebook\")),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",name:\"twitter\",className:\"Social-login-button-twitter\",onClick:handleLoginTwitter},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTwitter,size:\"lg\"}),/*#__PURE__*/React.createElement(\"span\",{style:{paddingRight:40}},\"Login with Twitter\")),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",name:\"google\",className:\"Social-login-button-google\",onClick:handleLoginGoogle},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faGoogle,size:\"lg\"}),/*#__PURE__*/React.createElement(\"span\",{style:{paddingRight:40}},\"Login with Google\"))):/*#__PURE__*/React.createElement(\"div\",{className:\"modal-form-container-login\"},isLoginSuccess?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Login Succesful!\"),/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faCheck,size:\"2x\"})):/*#__PURE__*/React.createElement(\"div\",{className:\"modal-login-loader\"})))));}export default LoginModal;","map":{"version":3,"sources":["/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/src/components/LoginModal.js"],"names":["React","useState","useEffect","useTranslation","FontAwesomeIcon","faTimes","faCheck","faTwitter","faFacebookF","faGoogle","firebase","fire","LoginModal","props","fireErrors","setFireErrors","isLoginLoading","setIsLoginLoading","isLoginSuccess","setIsLoginSuccess","t","handleClose","event","target","currentTarget","handleHideLogin","handleCloseSuccess","setTimeout","handleLoginFacebook","provider","auth","FacebookAuthProvider","setPersistence","Auth","Persistence","LOCAL","then","signInWithPopup","result","isNewUser","additionalUserInfo","currentUser","updateProfile","photoURL","console","log","catch","e","message","handleLoginTwitter","TwitterAuthProvider","handleLoginGoogle","GoogleAuthProvider","paddingRight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport \"./login-modal.css\"\nimport { useTranslation } from 'react-i18next'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes, faCheck } from \"@fortawesome/free-solid-svg-icons\";\nimport { faTwitter, faFacebookF, faGoogle } from \"@fortawesome/free-brands-svg-icons\"\nimport * as firebase from \"firebase/app\";\nimport \"firebase/auth\"\nimport fire from \"../fire\"; //required!\n\nfunction LoginModal(props){\n\n    const [fireErrors, setFireErrors] = useState(null);\n    const [isLoginLoading, setIsLoginLoading] = useState(false)\n    const [isLoginSuccess, setIsLoginSuccess] = useState(false)\n\n\n\n    const { t } = useTranslation()\n\n    const handleClose = (event) => {\n        if(event.target === event.currentTarget) \n        props.handleHideLogin()\n    }\n\n    const handleCloseSuccess = () => {\n        setIsLoginSuccess(true)\n        setTimeout(() => {\n            setIsLoginSuccess(false)\n            setIsLoginLoading(false)\n            props.handleHideLogin()\n        }, 1000)\n    }\n\n    const handleLoginFacebook = () => {            \n        const provider = new firebase.auth.FacebookAuthProvider;     \n\n        setIsLoginLoading(true)\n        firebase\n        .auth()\n        .setPersistence(firebase.auth.Auth.Persistence.LOCAL)\n        .then(() => { \n        firebase\n        .auth()\n        .signInWithPopup(provider)\n        .then(result => {\n            const isNewUser = result.additionalUserInfo.isNewUser\n            if(isNewUser){\n                firebase.auth().currentUser.updateProfile({photoURL: \"\"})\n            }\n            console.log(result)\n            handleCloseSuccess()\n        })\n        .catch(e => setFireErrors(e.message))//.then(console.log(\"AuthErros:\",fireErrors)) \n        })    \n    }\n\n    const handleLoginTwitter = () => {            \n        const provider = new firebase.auth.TwitterAuthProvider();     \n\n        setIsLoginLoading(true)\n        firebase\n        .auth()\n        .setPersistence(firebase.auth.Auth.Persistence.LOCAL)\n        .then(() => { \n        firebase\n        .auth()\n        .signInWithPopup(provider)\n        .then(result => {\n            const isNewUser = result.additionalUserInfo.isNewUser\n            if(isNewUser){\n                firebase.auth().currentUser.updateProfile({photoURL: \"\"})\n            }\n            console.log(result)\n            handleCloseSuccess()\n        })\n        .catch(e => setFireErrors(e.message))//.then(console.log(\"AuthErros:\",fireErrors))\n        }) \n    }\n\n    const handleLoginGoogle = () => {\n        const provider = new firebase.auth.GoogleAuthProvider();     \n\n        setIsLoginLoading(true)\n        firebase\n        .auth()\n        .setPersistence(firebase.auth.Auth.Persistence.LOCAL)\n        .then(() => { \n        firebase\n        .auth()\n        .signInWithPopup(provider)\n        .then(result => {\n            const isNewUser = result.additionalUserInfo.isNewUser\n            if(isNewUser){\n                firebase.auth().currentUser.updateProfile({photoURL: \"\"})\n            }\n            console.log(result)\n            handleCloseSuccess()\n        })\n        .catch(e => setFireErrors(e.message))//.then(console.log(\"AuthErros:\",fireErrors))  \n        })\n    }\n    \n    return(\n        <div className=\"modal-container-login\" name=\"mainmodal\" onClick={handleClose}>\n            <div className=\"modal-container-window-parent-login\">\n                <form className=\"modal-container-window-login\">\n                    <div className=\"modal-close-button-login\" onClick={props.handleHideLogin}>\n                        <FontAwesomeIcon icon={faTimes} size=\"1x\"/>\n                    </div>\n                  {!isLoginLoading ? <div className=\"modal-form-container-login\">\n                        <button \n                        type=\"button\"\n                        name=\"facebook\" \n                        className=\"Social-login-button-facebook\"\n                        onClick={handleLoginFacebook}\n                        >\n                            <FontAwesomeIcon icon={faFacebookF} size=\"lg\"/>\n                            <span style={{paddingRight:40}}>Login with Facebook</span>\n                        </button>\n                        <button \n                        type=\"button\"\n                        name=\"twitter\" \n                        className=\"Social-login-button-twitter\"\n                        onClick={handleLoginTwitter}\n                        >\n                            <FontAwesomeIcon icon={faTwitter} size=\"lg\"/>\n                            <span style={{paddingRight:40}}>Login with Twitter</span>\n                        </button>\n                        <button \n                        type=\"button\"\n                        name=\"google\" \n                        className=\"Social-login-button-google\"\n                        onClick={handleLoginGoogle}\n                        >\n                            <FontAwesomeIcon icon={faGoogle} size=\"lg\"/>\n                            <span style={{paddingRight:40}}>Login with Google</span>\n                        </button>\n                    </div>\n                    : \n                    <div className=\"modal-form-container-login\">\n                        {isLoginSuccess ? \n                        <div>\n                            <h2>Login Succesful!</h2>\n                            <FontAwesomeIcon icon={faCheck} size=\"2x\"/>\n                        </div>\n                        :<div className=\"modal-login-loader\"></div>}\n                    </div>}\n                </form>\n            </div>\n        </div>\n    )\n}\n\nexport default LoginModal"]},"metadata":{},"sourceType":"module"}