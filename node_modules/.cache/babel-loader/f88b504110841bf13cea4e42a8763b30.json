{"ast":null,"code":"var _jsxFileName = \"/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/src/components/App.js\";\n// Deps\nimport React, { useState, useEffect } from 'react';\nimport { debounce } from \"lodash\";\nimport moment from \"moment\";\nimport { useTranslation } from 'react-i18next';\nimport ReactGA from 'react-ga';\nimport * as firebase from \"firebase/app\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faChevronLeft, faChevronRight, faArrowAltCircleUp } from '@fortawesome/free-solid-svg-icons'; // Components\n\nimport './app.css';\nimport Header from \"./Header\";\nimport DaysPanel from \"./DaysPanel\";\nimport CategoryPanel from \"./CategoryPanel\";\nimport FeedPanel from './FeedPanel';\nimport Loading from \"./Loading\";\nimport Footer from \"./Footer\";\n\nfunction App() {\n  const testArr = [\"red\", \"green\", \"blue\", \"yellow\"];\n  const random = testArr.map(items => {\n    //<GroupOfFriends id={items} groupName={items} friends={friends} />\n    console.log(items);\n  }); // Google Analytics\n\n  ReactGA.initialize('UA-162926417-1');\n  ReactGA.pageview(\"/app\"); // Translation\n\n  const {\n    t,\n    i18n\n  } = useTranslation();\n\n  const changeLanguage = lang => {\n    setLanguage(lang);\n    i18n.changeLanguage(lang);\n  };\n\n  const [feedItems, setFeedItems] = useState(null);\n  const [autoComleteFeed, setAutoComleteFeed] = useState([]);\n  const [daySelected, setDaySelected] = useState(\"all\"); //useState(moment().format('YYYY-MM-DD'))\n\n  const [catSelected, setCatSelected] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [language, setLanguage] = useState(\"en\");\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [searchFilter, setSearchFilter] = useState(\"\");\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [userData, setUserData] = useState({\n    displayName: \"\",\n    savedItems: \"\",\n    email: \"\",\n    userId: \"\"\n  });\n  useEffect(() => {\n    if (userData.savedItems) {\n      const savedListArr = userData.savedItems.split(\",\");\n      const tempArr = [...savedListArr];\n      feedItems && savedListArr.map(itemID => {\n        const itemNotFound = feedItems.find(item => item.itemID === parseInt(itemID));\n\n        if (!itemNotFound) {\n          const toDelete = tempArr.indexOf(itemID);\n          tempArr.splice(toDelete, 1);\n          const newList = tempArr.join(',');\n          setUserData(prevState => ({ ...prevState,\n            savedItems: newList\n          }));\n          firebase.auth().currentUser.updateProfile({\n            photoURL: newList\n          });\n          console.log(\"toDelete\", toDelete);\n          console.log(\"ItemToDelete:\", itemID);\n          console.log(\"tempArr:\", tempArr);\n          console.log(\"NewList:\", newList);\n          console.log(\"savedListArr:\", savedListArr);\n        }\n      });\n    }\n  }, [feedItems]);\n  useEffect(() => {\n    const authListener = firebase.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        setIsLoggedIn(true);\n        console.log(\"User Authenticated:\", user);\n\n        if (user.photoURL && user.photoURL.includes(\"https://\")) {\n          setUserData(prevState => ({ ...prevState,\n            displayName: user.displayName,\n            savedItems: \"\",\n            email: user.email,\n            userId: user.uid\n          }));\n        } else {\n          setUserData(prevState => ({ ...prevState,\n            displayName: user.displayName,\n            savedItems: user.photoURL,\n            email: user.email,\n            userId: user.uid\n          }));\n        }\n      } else {\n        setIsLoggedIn(false);\n        console.log(\"No User:\", user);\n      }\n    });\n    return authListener;\n  }, []);\n  window.baseUrl = \"https://stream-hub.net/api/\"; // window.baseUrl=\"https://localhost:44339/api\";\n\n  window.allowPostWithoutLogin = true;\n\n  const fetchItems = async () => {\n    const apiCall = await fetch(`${window.baseUrl}items/`);\n    const items = await apiCall.json();\n    setAutoComleteFeed(items);\n    setFeedItems(items);\n    setIsLoading(false);\n    setLanguage(i18n.language);\n  };\n\n  useEffect(() => {\n    fetchItems();\n  }, []);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setSearchFilter(searchTerm);\n    }, 800);\n    return () => clearTimeout(timer);\n  }, [searchTerm]);\n  if (isLoading) return /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 26\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app\",\n    style: language === \"he\" ? {\n      direction: \"rtl\"\n    } : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-header-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    autoComleteFeed: autoComleteFeed,\n    language: language,\n    changeLanguage: changeLanguage,\n    setSearchTerm: setSearchTerm,\n    searchTerm: searchTerm,\n    setIsLoggedIn: setIsLoggedIn,\n    isLoggedIn: isLoggedIn,\n    setUserData: setUserData,\n    userData: userData,\n    feedItems: feedItems,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-banner-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"150px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-categories-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CategoryPanel, {\n    cat: setCatSelected,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-days-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"days-panel-slider-arrows\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faChevronLeft,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faChevronRight,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(DaysPanel, {\n    dayChange: setDaySelected,\n    day: setDaySelected,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-feed-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FeedPanel, {\n    feed: feedItems,\n    dayFilter: daySelected,\n    catFilter: catSelected,\n    searchFilter: searchFilter,\n    isLoggedIn: isLoggedIn,\n    setUserData: setUserData,\n    userData: userData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-footer-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/src/components/App.js"],"names":["React","useState","useEffect","debounce","moment","useTranslation","ReactGA","firebase","FontAwesomeIcon","faChevronLeft","faChevronRight","faArrowAltCircleUp","Header","DaysPanel","CategoryPanel","FeedPanel","Loading","Footer","App","testArr","random","map","items","console","log","initialize","pageview","t","i18n","changeLanguage","lang","setLanguage","feedItems","setFeedItems","autoComleteFeed","setAutoComleteFeed","daySelected","setDaySelected","catSelected","setCatSelected","isLoading","setIsLoading","language","searchTerm","setSearchTerm","searchFilter","setSearchFilter","isLoggedIn","setIsLoggedIn","userData","setUserData","displayName","savedItems","email","userId","savedListArr","split","tempArr","itemID","itemNotFound","find","item","parseInt","toDelete","indexOf","splice","newList","join","prevState","auth","currentUser","updateProfile","photoURL","authListener","onAuthStateChanged","user","includes","uid","window","baseUrl","allowPostWithoutLogin","fetchItems","apiCall","fetch","json","timer","setTimeout","clearTimeout","direction","height"],"mappings":"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","sourcesContent":["// Deps\nimport React,{ useState, useEffect } from 'react'\nimport { debounce } from \"lodash\";\nimport moment from \"moment\"\nimport { useTranslation } from 'react-i18next'\nimport ReactGA from 'react-ga'\nimport * as firebase from \"firebase/app\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faChevronLeft, faChevronRight, faArrowAltCircleUp } from '@fortawesome/free-solid-svg-icons'\n\n// Components\nimport './app.css'\nimport Header from \"./Header\"\nimport DaysPanel from \"./DaysPanel\"\nimport CategoryPanel from \"./CategoryPanel\"\nimport FeedPanel from './FeedPanel'\nimport Loading from \"./Loading\"\nimport Footer from \"./Footer\"\n\nfunction App() {\n\n\n  const testArr = [\"red\",\"green\",\"blue\",\"yellow\"]\n      \n  const random = testArr.map(items => {\n    //<GroupOfFriends id={items} groupName={items} friends={friends} />\n    console.log(items)\n  })\n\n\n  // Google Analytics\n  ReactGA.initialize('UA-162926417-1')\n  ReactGA.pageview(\"/app\")\n\n  // Translation\n  const { t, i18n } = useTranslation()\n\n  const changeLanguage = lang => {\n    setLanguage(lang)\n    i18n.changeLanguage(lang)\n  }\n  \n  const [feedItems, setFeedItems] = useState(null)\n  const [autoComleteFeed,setAutoComleteFeed]= useState([])\n  const [daySelected, setDaySelected] = useState(\"all\") //useState(moment().format('YYYY-MM-DD'))\n  const [catSelected, setCatSelected] = useState(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [language, setLanguage] = useState(\"en\")\n  const [searchTerm, setSearchTerm] = useState(\"\")\n  const [searchFilter, setSearchFilter] = useState(\"\")\n  const [isLoggedIn, setIsLoggedIn] = useState(false)\n  const [userData, setUserData] = useState({\n    displayName: \"\",\n    savedItems: \"\",\n    email: \"\",\n    userId: \"\",\n  })\n\n\n  useEffect(() => {\n    if(userData.savedItems) {\n      const savedListArr = userData.savedItems.split(\",\")\n      const tempArr = [...savedListArr]\n      feedItems && savedListArr.map(itemID => {\n        const itemNotFound = feedItems.find(item => item.itemID === parseInt(itemID))\n        if(!itemNotFound){\n          const toDelete = tempArr.indexOf(itemID)\n          tempArr.splice(toDelete, 1)\n          const newList = tempArr.join(',')\n\n          setUserData(prevState => ({...prevState, savedItems: newList}))\n          firebase.auth().currentUser.updateProfile({photoURL: newList})\n\n          console.log(\"toDelete\",toDelete)\n          console.log(\"ItemToDelete:\",itemID)\n          console.log(\"tempArr:\",tempArr)\n          console.log(\"NewList:\",newList)\n          console.log(\"savedListArr:\",savedListArr)\n        }\n      })\n    }\n  }, [feedItems])\n\n\n  useEffect(() => {\n    const authListener = firebase.auth().onAuthStateChanged(function(user) {\n      if (user) {\n        setIsLoggedIn(true)\n        console.log(\"User Authenticated:\",user)\n        if (user.photoURL && user.photoURL.includes(\"https://\")){\n          setUserData(prevState => ({\n            ...prevState, \n            displayName: user.displayName,\n            savedItems: \"\",\n            email: user.email,\n            userId: user.uid,\n          }))\n        } else {\n\n          setUserData(prevState => ({\n            ...prevState, \n            displayName: user.displayName,\n            savedItems: user.photoURL,\n            email: user.email,\n            userId: user.uid,\n          }))\n        }\n      } else {\n        setIsLoggedIn(false)\n        console.log(\"No User:\",user)\n      }\n    })\n    return authListener\n  }, [])\n\n  window.baseUrl=\"https://stream-hub.net/api/\";\n // window.baseUrl=\"https://localhost:44339/api\";\n  window.allowPostWithoutLogin=true;\n  const fetchItems = async () => {\n    const apiCall = await fetch(`${ window.baseUrl}items/`);\n    const items = await apiCall.json()\n    setAutoComleteFeed(items)\n    setFeedItems(items)\n    setIsLoading(false)\n    setLanguage(i18n.language)\n  }\n  \n  useEffect(() => {\n    fetchItems()\n  },[])\n  \n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setSearchFilter(searchTerm);\n    }, 800);\n\n    return () => clearTimeout(timer);\n  }, [searchTerm]);\n\n  if (isLoading) return (<Loading />)\n  return (\n\n    <div className=\"app\" style={language === \"he\" ? {direction: \"rtl\"} : null}>\n      \n      <div className=\"app-header-container\">\n        <Header \n        autoComleteFeed={autoComleteFeed} \n        language={language} \n        changeLanguage={changeLanguage} \n        setSearchTerm={setSearchTerm}\n        searchTerm={searchTerm}\n        setIsLoggedIn={setIsLoggedIn}\n        isLoggedIn={isLoggedIn}\n        setUserData={setUserData}\n        userData={userData}\n        feedItems={feedItems}\n        />\n      </div>\n      <div className=\"app-banner-container\">\n        <div style={{height:\"150px\"}}></div>\n      </div>\n      <div className=\"app-categories-container\">\n        <CategoryPanel \n        cat={setCatSelected}\n        />\n      </div>\n      <div className=\"app-days-container\">\n        <div className=\"days-panel-slider-arrows\">\n          <FontAwesomeIcon icon={faChevronLeft}/>\n          <FontAwesomeIcon icon={faChevronRight}/>\n        </div>\n        <DaysPanel \n        dayChange={setDaySelected} \n        day={setDaySelected}\n        />\n      </div>\n      <div className=\"app-feed-container\">\n        <FeedPanel \n        feed={feedItems} \n        dayFilter={daySelected} \n        catFilter={catSelected} \n        searchFilter={searchFilter}\n        isLoggedIn={isLoggedIn}\n        setUserData={setUserData}\n        userData={userData}\n        />\n      </div>\n      <div className=\"app-footer-container\">\n        <Footer />\n      </div>\n    </div>\n\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}