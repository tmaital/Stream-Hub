{"ast":null,"code":"import _regeneratorRuntime from\"/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// Deps\nimport React,{useState,useEffect,useRef,createRef}from'react';import moment from\"moment\";import{useTranslation}from'react-i18next';import ReactGA from'react-ga';import*as firebase from\"firebase/app\";// Components\nimport'./app.css';import Header from\"./Header\";import DaysPanel from\"./DaysPanel\";import CategoryPanel from\"./CategoryPanel\";import FeedPanel from'./FeedPanel';import Loading from\"./Loading\";function App(){// Google Analytics\nReactGA.initialize('UA-162926417-1');ReactGA.pageview(\"/app\");// Translation\nvar _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var changeLanguage=function changeLanguage(lang){setLanguage(lang);i18n.changeLanguage(lang);};var _useState=useState(null),_useState2=_slicedToArray(_useState,2),feedItems=_useState2[0],setFeedItems=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),categories=_useState4[0],setCategories=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),filteredFeedItems=_useState6[0],setFilteredFeedItems=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isFetchedData=_useState8[0],setIsFetchedData=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),autoComleteFeed=_useState10[0],setAutoComleteFeed=_useState10[1];var _useState11=useState(moment().format('YYYY-MM-DD')),_useState12=_slicedToArray(_useState11,2),daySelected=_useState12[0],setDaySelected=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),catSelected=_useState14[0],setCatSelected=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),isLoading=_useState16[0],setIsLoading=_useState16[1];var _useState17=useState(\"en\"),_useState18=_slicedToArray(_useState17,2),language=_useState18[0],setLanguage=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),searchFilter=_useState20[0],setSearchFilter=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),isLoggedIn=_useState22[0],setIsLoggedIn=_useState22[1];var _useState23=useState({displayName:\"\",savedItems:\"\",email:\"\"}),_useState24=_slicedToArray(_useState23,2),userData=_useState24[0],setUserData=_useState24[1];useEffect(function(){var authListener=firebase.auth().onAuthStateChanged(function(user){if(user){setIsLoggedIn(true);console.log(\"User Logged In:\",user);if(user.photoURL&&user.photoURL.includes(\"https://\")){setUserData(function(prevState){return _objectSpread({},prevState,{displayName:user.displayName,savedItems:\"\",email:user.email});});}else{setUserData(function(prevState){return _objectSpread({},prevState,{displayName:user.displayName,savedItems:user.photoURL,email:user.email});});}}else{setIsLoggedIn(false);console.log(\"No User:\",user);}});return authListener;},[]);window.baseUrl=\"https://stream-hub.net/api/\";// window.baseUrl=\"https://localhost:44339/api\";\nwindow.allowPostWithoutLogin=true;var fetchItems=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var apiCall,items;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(window.baseUrl,\"items/\"));case 2:apiCall=_context.sent;_context.next=5;return apiCall.json();case 5:items=_context.sent;setAutoComleteFeed(items);setFeedItems(items);setFilteredFeedItems(items);setIsLoading(false);setLanguage(i18n.language);case 11:case\"end\":return _context.stop();}}},_callee);}));return function fetchItems(){return _ref.apply(this,arguments);};}();useEffect(function(){if(!isFetchedData){setIsFetchedData(true);fetchItems();//fetchCategories()\n}});if(isLoading)return/*#__PURE__*/React.createElement(Loading,null);return/*#__PURE__*/React.createElement(\"div\",{className:\"app\",style:language===\"he\"?{direction:\"rtl\"}:null},/*#__PURE__*/React.createElement(\"div\",{className:\"app-header-container\"},/*#__PURE__*/React.createElement(Header,{autoComleteFeed:autoComleteFeed,language:language,changeLanguage:changeLanguage,setSearchFilter:setSearchFilter,searchFilter:searchFilter,setIsLoggedIn:setIsLoggedIn,isLoggedIn:isLoggedIn,setUserData:setUserData,userData:userData,feed:feedItems})),/*#__PURE__*/React.createElement(\"div\",{className:\"app-categories-container\"},/*#__PURE__*/React.createElement(CategoryPanel,{categories:categories,cat:setCatSelected})),/*#__PURE__*/React.createElement(\"div\",{className:\"app-days-container\"},/*#__PURE__*/React.createElement(DaysPanel,{dayChange:setDaySelected,day:setDaySelected})),/*#__PURE__*/React.createElement(\"div\",{className:\"app-feed-container\"},/*#__PURE__*/React.createElement(FeedPanel,{feed:feedItems,dayFilter:daySelected,catFilter:catSelected,searchFilter:searchFilter,isLoggedIn:isLoggedIn,setUserData:setUserData,userData:userData})));}export default App;","map":{"version":3,"sources":["/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/src/components/App.js"],"names":["React","useState","useEffect","useRef","createRef","moment","useTranslation","ReactGA","firebase","Header","DaysPanel","CategoryPanel","FeedPanel","Loading","App","initialize","pageview","t","i18n","changeLanguage","lang","setLanguage","feedItems","setFeedItems","categories","setCategories","filteredFeedItems","setFilteredFeedItems","isFetchedData","setIsFetchedData","autoComleteFeed","setAutoComleteFeed","format","daySelected","setDaySelected","catSelected","setCatSelected","isLoading","setIsLoading","language","searchFilter","setSearchFilter","isLoggedIn","setIsLoggedIn","displayName","savedItems","email","userData","setUserData","authListener","auth","onAuthStateChanged","user","console","log","photoURL","includes","prevState","window","baseUrl","allowPostWithoutLogin","fetchItems","fetch","apiCall","json","items","direction"],"mappings":"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","sourcesContent":["// Deps\nimport React,{ useState, useEffect, useRef, createRef } from 'react'\nimport moment from \"moment\"\nimport { useTranslation } from 'react-i18next'\nimport ReactGA from 'react-ga'\nimport * as firebase from \"firebase/app\";\n\n\n// Components\nimport './app.css'\nimport Header from \"./Header\"\nimport DaysPanel from \"./DaysPanel\"\nimport CategoryPanel from \"./CategoryPanel\"\nimport FeedPanel from './FeedPanel'\nimport Loading from \"./Loading\"\n\nfunction App() {\n\n  // Google Analytics\n  ReactGA.initialize('UA-162926417-1')\n  ReactGA.pageview(\"/app\")\n\n  // Translation\n  const { t, i18n } = useTranslation()\n\n  const changeLanguage = lang => {\n    setLanguage(lang)\n    i18n.changeLanguage(lang)\n  }\n  \n  const [feedItems, setFeedItems] = useState(null)\n  const [categories, setCategories] = useState(null)\n  const [filteredFeedItems, setFilteredFeedItems] = useState(null)\n  const [isFetchedData,setIsFetchedData]= useState(false)\n  const [autoComleteFeed,setAutoComleteFeed]= useState([])\n  const [daySelected, setDaySelected] = useState(moment().format('YYYY-MM-DD'))\n  const [catSelected, setCatSelected] = useState(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [language, setLanguage] = useState(\"en\")\n  const [searchFilter, setSearchFilter] = useState(\"\")\n  const [isLoggedIn, setIsLoggedIn] = useState(false)\n  const [userData, setUserData] = useState({\n    displayName: \"\",\n    savedItems: \"\",\n    email: \"\",\n  })\n\n  useEffect(() => {\n    const authListener = firebase.auth().onAuthStateChanged(function(user) {\n      if (user) {\n        setIsLoggedIn(true)\n        console.log(\"User Logged In:\",user)\n        if (user.photoURL && user.photoURL.includes(\"https://\")){\n          setUserData(prevState => ({\n            ...prevState, \n            displayName: user.displayName,\n            savedItems: \"\",\n            email: user.email\n          }))\n        } else {\n          setUserData(prevState => ({\n            ...prevState, \n            displayName: user.displayName,\n            savedItems: user.photoURL,\n            email: user.email\n          }))\n        }\n      } else {\n        setIsLoggedIn(false)\n        console.log(\"No User:\",user)\n      }\n    })\n    return authListener\n  }, [])\n\n  window.baseUrl=\"https://stream-hub.net/api/\";\n // window.baseUrl=\"https://localhost:44339/api\";\n  window.allowPostWithoutLogin=true;\n  const fetchItems = async () => {\n    const apiCall = await fetch(`${ window.baseUrl}items/`);\n    const items = await apiCall.json()\n    setAutoComleteFeed(items)\n    setFeedItems(items)\n    setFilteredFeedItems(items)\n    setIsLoading(false)\n    setLanguage(i18n.language)\n  }\n  \n  useEffect(() => {\n    if (!isFetchedData){\n      setIsFetchedData(true)\n      fetchItems()\n      //fetchCategories()\n    }\n  })\n\n  if (isLoading) return (<Loading />)\n  return (\n\n    <div className=\"app\" style={language === \"he\" ? {direction: \"rtl\"} : null}>\n      \n      <div className=\"app-header-container\">\n        <Header \n        autoComleteFeed={autoComleteFeed} \n        language={language} \n        changeLanguage={changeLanguage} \n        setSearchFilter={setSearchFilter}\n        searchFilter={searchFilter}\n        setIsLoggedIn={setIsLoggedIn}\n        isLoggedIn={isLoggedIn}\n        setUserData={setUserData}\n        userData={userData}\n        feed={feedItems}\n        />\n      </div>\n      <div className=\"app-categories-container\">\n        <CategoryPanel \n        categories={categories} \n        cat={setCatSelected}\n        />\n      </div>\n      <div className=\"app-days-container\">\n        <DaysPanel \n        dayChange={setDaySelected} \n        day={setDaySelected}\n        />\n      </div>\n      <div className=\"app-feed-container\">\n        <FeedPanel \n        feed={feedItems} \n        dayFilter={daySelected} \n        catFilter={catSelected} \n        searchFilter={searchFilter}\n        isLoggedIn={isLoggedIn}\n        setUserData={setUserData}\n        userData={userData}\n        />\n      </div>\n    </div>\n\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}