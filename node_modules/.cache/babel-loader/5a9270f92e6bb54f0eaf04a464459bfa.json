{"ast":null,"code":"var _jsxFileName = \"/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/src/components/FeedItem.js\";\nimport React, { Component } from 'react';\nimport moment from \"moment\";\nimport { withTranslation } from 'react-i18next';\nimport './feed-item.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faShareSquare, faUser, faStar, faFlag } from '@fortawesome/free-regular-svg-icons';\nimport { faShareSquare as solidShare, faUser as solidUser, faStar as solidStar, faFlag as solidFlag } from '@fortawesome/free-solid-svg-icons';\nimport * as firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport fire from \"../fire\"; //required!\n\nimport SharePanel from \"./SharePanel\"; //{props.feed.itemTitle}\n\nclass FeedItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      catColor: \"rgba(20, 20, 255, 0.65)\",\n      save: this.props.userData.savedItems ? this.props.userData.savedItems.includes(this.props.feed.itemID) ? true : false : false,\n      share: false,\n      host: false,\n      report: false,\n      views: Math.ceil(this.props.feed.itemTitle.length * this.props.feed.itemTitle.length / 100 * 1.5)\n    };\n    this.handleSave = this.handleSave.bind(this);\n    this.handleShare = this.handleShare.bind(this);\n    this.handleHost = this.handleHost.bind(this);\n    this.handleReport = this.handleReport.bind(this);\n  }\n\n  componentDidMount() {\n    const itemCategoryArr = eval(this.props.feed.itemTags);\n    const itemCategory = itemCategoryArr[0];\n\n    if (itemCategory === \"kids\") {\n      this.setState({\n        catColor: \"rgba(241, 49, 255, 0.65)\"\n      });\n    } else if (itemCategory === \"lectures\") {\n      this.setState({\n        catColor: \"rgba(158, 120, 228, 0.65)\"\n      });\n    } else if (itemCategory === \"fitness\") {\n      this.setState({\n        catColor: \"rgba(91, 178, 206, 0.65)\"\n      });\n    } else if (itemCategory === \"fun\") {\n      this.setState({\n        catColor: \"rgba(32, 212, 159, 0.65)\"\n      });\n    } else if (itemCategory === \"other\") {\n      this.setState({\n        catColor: \"rgba(51, 190, 46, 0.65)\"\n      });\n    }\n  } // handleSave(){\n  //   if(this.props.isLoggedIn && \n  //     this.props.userData.savedItems && \n  //     !this.props.userData.savedItems.includes(this.props.feed.itemID)){\n  //       const savedItemsArr = this.props.userData.savedItems.split(',')\n  //       savedItemsArr.push(this.props.feed.itemID)\n  //       const SaveList = savedItemsArr.join(',')\n  //       this.props.setUserData(prevState => ({...prevState, savedItems: SaveList}))\n  //       firebase.auth().currentUser.updateProfile({photoURL: SaveList})\n  //       console.log(\"Original Firebase List:\",firebase.auth().currentUser.photoURL) \n  //       console.log(\"Original List:\",this.props.userData.savedItems) \n  //       console.log(\"Array:\",savedItemsArr) \n  //       console.log(\"New List:\",SaveList) \n  //       console.log(\"SAVE:\",this.props.userData.savedItems.includes(this.props.feed.itemID))\n  //     } else if(this.props.isLoggedIn && !this.props.userData.savedItems){\n  //       this.props.setUserData(prevState => ({...prevState, savedItems: \",\"+this.props.feed.itemID}))\n  //       firebase.auth().currentUser.updateProfile({photoURL: \",\"+this.props.feed.itemID})\n  //     } else if(this.props.isLoggedIn){\n  //     const unSavedList = this.props.userData.savedItems.replace(\",\"+this.props.feed.itemID, \"\")\n  //     this.props.setUserData(prevState => ({...prevState, savedItems: unSavedList}))\n  //     firebase.auth().currentUser.updateProfile({photoURL: unSavedList})\n  //   }\n  // }\n\n\n  handleSave() {\n    if (this.props.isLoggedIn) {\n      if (!this.props.userData.savedItems || !this.props.userData.savedItems.includes(this.props.feed.itemID)) {\n        const savedItemsArr = this.props.userData.savedItems ? this.props.userData.savedItems.split(',') : [];\n        savedItemsArr.push(this.props.feed.itemID);\n        const SaveList = savedItemsArr.join(',');\n        this.props.setUserData(prevState => ({ ...prevState,\n          savedItems: SaveList\n        }));\n        firebase.auth().currentUser.updateProfile({\n          photoURL: SaveList\n        });\n        console.log(\"S-Original Firebase List:\", firebase.auth().currentUser.photoURL);\n        console.log(\"S-Original List:\", this.props.userData.savedItems);\n        console.log(\"S-Array:\", savedItemsArr);\n        console.log(\"S-New List:\", SaveList);\n      } else if (this.props.isLoggedIn) {\n        const savedItemsArr = this.props.userData.savedItems.split(',');\n        const toDelete = savedItemsArr.indexOf(this.props.feed.itemID.toString());\n        savedItemsArr.splice(toDelete, 1);\n        const newList = savedItemsArr.join(',');\n        this.props.setUserData(prevState => ({ ...prevState,\n          savedItems: newList\n        }));\n        firebase.auth().currentUser.updateProfile({\n          photoURL: newList\n        });\n        console.log(\"D-Original Firebase List:\", firebase.auth().currentUser.photoURL);\n        console.log(\"D-Original List:\", this.props.userData.savedItems);\n        console.log(\"D-Item ID to index:\", this.props.feed.itemID);\n        console.log(\"D-Delete Index:\", toDelete);\n        console.log(\"D-Array:\", savedItemsArr);\n        console.log(\"D-New List:\", newList);\n      }\n    } else {\n      return null;\n    }\n  }\n\n  handleShare() {\n    this.setState(prevState => ({\n      share: !prevState.share\n    })); // setTimeout(() => {\n    //   window.open(shareURL, '_blank', 'location=yes,height=570,width=520,scrollbars=yes,status=yes')\n    //   this.setState({share: false})\n    // }, 200);\n  }\n\n  handleHost() {\n    this.setState({\n      host: true\n    });\n    setTimeout(() => {\n      window.open(this.props.feed.itemURL, '_blank', 'location=yes,height=570,width=520,scrollbars=yes,status=yes');\n      this.setState({\n        host: false\n      });\n    }, 200);\n  }\n\n  handleReport() {\n    this.setState({\n      report: true\n    });\n    setTimeout(() => {\n      window.location = `mailto:roigfrey@gmail.com\n                      ?subject=streamHub: I would like to report Item #${this.props.feed.itemID}\n                      &body=I would like to report the event \"${this.props.feed.itemTitle}\". please list the reason for reporting below:`;\n      this.setState({\n        report: false\n      });\n    }, 200);\n  }\n\n  render() {\n    const {\n      t\n    } = this.props;\n    const availableCats = [\"kids\", \"lectures\", \"fitness\", \"fun\"];\n    const itemCategoryArr = eval(this.props.feed.itemTags);\n    const itemCategory = itemCategoryArr && availableCats.indexOf(itemCategoryArr[0]) !== -1 ? itemCategoryArr[0] : \"other\";\n    const timeObj = moment(this.props.feed.itemStartDateObj).format(\"DD/MM | HH:mm\");\n    const timeEnd = moment(this.props.feed.itemStartDateObj).add(this.props.feed.itemDuration, \"seconds\").format(\"HH:mm\");\n    const timeLabel = moment(this.props.feed.itemStartDateObj).format(t(\"momenttimelabel\"));\n    const saveState = this.props.userData.savedItems ? this.props.userData.savedItems.includes(this.props.feed.itemID) ? solidStar : faStar : faStar;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"feed-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: this.props.image,\n      alt: \"Event\",\n      className: t(\"lang\") === \"he\" ? \"feed-item-img-rtl\" : \"feed-item-img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"feed-item-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      onClick: this.handleHost,\n      className: t(\"lang\") === \"he\" ? \"feed-item-title-h2-rtl\" : \"feed-item-title-h2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, this.props.feed.itemTitle), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }\n    }, `${timeObj}-${timeEnd}`)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"feed-item-timelabel\",\n      style: {\n        background: this.state.catColor\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }\n    }, timeLabel)), /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"feed-item-catlabel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }\n    }, t(itemCategory)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"feed-item-description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 13\n      }\n    }, this.props.feed.itemDescription), /*#__PURE__*/React.createElement(\"a\", {\n      href: this.props.feed.itemURL,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    }, t(\"Link to Live Event\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"feed-item-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"feed-item-icons-class\",\n      onClick: this.handleSave,\n      style: this.props.isLoggedIn ? null : {\n        color: \"#c7c7c7\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      className: \"feed-item-icons-class\",\n      icon: saveState,\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 15\n      }\n    }, t(\"Save\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"feed-item-icons-class\",\n      onClick: this.handleShare,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      className: \"feed-item-icons-class\",\n      icon: this.state.share ? solidShare : faShareSquare,\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 15\n      }\n    }, t(\"Share\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"feed-item-icons-class\",\n      onClick: this.handleReport,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      className: \"feed-item-icons-class\",\n      icon: this.state.report ? solidFlag : faFlag,\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 15\n      }\n    }, t(\"Report\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"feed-item-icons-counter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 15\n      }\n    }, this.state.views), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 15\n      }\n    }, t(\"Views\"))), this.state.share ? /*#__PURE__*/React.createElement(SharePanel, {\n      item: this.props.feed,\n      image: this.props.image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 33\n      }\n    }) : null));\n  }\n\n}\n\nexport default withTranslation()(FeedItem);","map":{"version":3,"sources":["/home/main/Documents/tvguide/livey-master/StreamHubCore2/StreamHubCore2/ClientApp/src/components/FeedItem.js"],"names":["React","Component","moment","withTranslation","FontAwesomeIcon","faShareSquare","faUser","faStar","faFlag","solidShare","solidUser","solidStar","solidFlag","firebase","fire","SharePanel","FeedItem","constructor","props","state","catColor","save","userData","savedItems","includes","feed","itemID","share","host","report","views","Math","ceil","itemTitle","length","handleSave","bind","handleShare","handleHost","handleReport","componentDidMount","itemCategoryArr","eval","itemTags","itemCategory","setState","isLoggedIn","savedItemsArr","split","push","SaveList","join","setUserData","prevState","auth","currentUser","updateProfile","photoURL","console","log","toDelete","indexOf","toString","splice","newList","setTimeout","window","open","itemURL","location","render","t","availableCats","timeObj","itemStartDateObj","format","timeEnd","add","itemDuration","timeLabel","saveState","image","background","itemDescription","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport moment from \"moment\"\nimport { withTranslation } from 'react-i18next';\nimport './feed-item.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faShareSquare, faUser, faStar, faFlag } from '@fortawesome/free-regular-svg-icons'\nimport { faShareSquare as solidShare, faUser as solidUser, faStar as solidStar, faFlag as solidFlag } from '@fortawesome/free-solid-svg-icons'\nimport * as firebase from \"firebase/app\";\nimport \"firebase/auth\"\nimport fire from \"../fire\"; //required!\nimport SharePanel from \"./SharePanel\"\n\n\n//{props.feed.itemTitle}\n\nclass FeedItem extends Component{\n  constructor(props){\n    super(props)\n    this.state = {\n      catColor: \"rgba(20, 20, 255, 0.65)\",\n      save: this.props.userData.savedItems ? this.props.userData.savedItems.includes(this.props.feed.itemID) ? true : false : false,\n      share:false,\n      host: false,\n      report: false,\n      views: Math.ceil(this.props.feed.itemTitle.length * this.props.feed.itemTitle.length / 100 * 1.5)\n\n    }\n  this.handleSave = this.handleSave.bind(this)\n  this.handleShare = this.handleShare.bind(this)\n  this.handleHost = this.handleHost.bind(this)\n  this.handleReport = this.handleReport.bind(this)\n  }\n\n  componentDidMount(){\n    const itemCategoryArr = eval(this.props.feed.itemTags)\n    const itemCategory = itemCategoryArr[0]\n    if(itemCategory === \"kids\"){this.setState({catColor: \"rgba(241, 49, 255, 0.65)\"})}\n    else if(itemCategory === \"lectures\"){this.setState({catColor: \"rgba(158, 120, 228, 0.65)\"})}\n    else if(itemCategory === \"fitness\"){this.setState({catColor: \"rgba(91, 178, 206, 0.65)\"})}\n    else if(itemCategory === \"fun\"){this.setState({catColor: \"rgba(32, 212, 159, 0.65)\"})}\n    else if(itemCategory === \"other\"){this.setState({catColor: \"rgba(51, 190, 46, 0.65)\"})}\n    } \n  \n  // handleSave(){\n  //   if(this.props.isLoggedIn && \n  //     this.props.userData.savedItems && \n  //     !this.props.userData.savedItems.includes(this.props.feed.itemID)){\n  //       const savedItemsArr = this.props.userData.savedItems.split(',')\n  //       savedItemsArr.push(this.props.feed.itemID)\n  //       const SaveList = savedItemsArr.join(',')\n\n  //       this.props.setUserData(prevState => ({...prevState, savedItems: SaveList}))\n  //       firebase.auth().currentUser.updateProfile({photoURL: SaveList})\n        \n  //       console.log(\"Original Firebase List:\",firebase.auth().currentUser.photoURL) \n  //       console.log(\"Original List:\",this.props.userData.savedItems) \n  //       console.log(\"Array:\",savedItemsArr) \n  //       console.log(\"New List:\",SaveList) \n  //       console.log(\"SAVE:\",this.props.userData.savedItems.includes(this.props.feed.itemID))\n        \n  //     } else if(this.props.isLoggedIn && !this.props.userData.savedItems){\n  //       this.props.setUserData(prevState => ({...prevState, savedItems: \",\"+this.props.feed.itemID}))\n  //       firebase.auth().currentUser.updateProfile({photoURL: \",\"+this.props.feed.itemID})\n  //     } else if(this.props.isLoggedIn){\n  //     const unSavedList = this.props.userData.savedItems.replace(\",\"+this.props.feed.itemID, \"\")\n\n  //     this.props.setUserData(prevState => ({...prevState, savedItems: unSavedList}))\n  //     firebase.auth().currentUser.updateProfile({photoURL: unSavedList})\n  //   }\n  // }\n\n  handleSave(){\n    if(this.props.isLoggedIn){\n      if(!this.props.userData.savedItems ||\n        !this.props.userData.savedItems.includes(this.props.feed.itemID)){\n        const savedItemsArr = this.props.userData.savedItems ? this.props.userData.savedItems.split(',') : []\n        savedItemsArr.push(this.props.feed.itemID)\n        const SaveList = savedItemsArr.join(',')\n\n        this.props.setUserData(prevState => ({...prevState, savedItems: SaveList}))\n        firebase.auth().currentUser.updateProfile({photoURL: SaveList})\n        \n        console.log(\"S-Original Firebase List:\",firebase.auth().currentUser.photoURL) \n        console.log(\"S-Original List:\",this.props.userData.savedItems) \n        console.log(\"S-Array:\",savedItemsArr) \n        console.log(\"S-New List:\",SaveList) \n\n      } else if(this.props.isLoggedIn){\n        const savedItemsArr = this.props.userData.savedItems.split(',')\n        const toDelete = savedItemsArr.indexOf(this.props.feed.itemID.toString())\n        savedItemsArr.splice(toDelete, 1)\n        const newList = savedItemsArr.join(',')\n        this.props.setUserData(prevState => ({...prevState, savedItems: newList}))\n        firebase.auth().currentUser.updateProfile({photoURL: newList})\n\n        console.log(\"D-Original Firebase List:\",firebase.auth().currentUser.photoURL) \n        console.log(\"D-Original List:\",this.props.userData.savedItems) \n        console.log(\"D-Item ID to index:\",this.props.feed.itemID)\n        console.log(\"D-Delete Index:\",toDelete) \n        console.log(\"D-Array:\",savedItemsArr) \n        console.log(\"D-New List:\",newList) \n      }\n    } else {return null}\n  }\n\n  handleShare(){\n    this.setState(prevState => ({\n      share: !prevState.share\n    }));\n    // setTimeout(() => {\n    //   window.open(shareURL, '_blank', 'location=yes,height=570,width=520,scrollbars=yes,status=yes')\n    //   this.setState({share: false})\n    // }, 200);\n  }\n\n  handleHost(){\n    this.setState({host: true})\n    setTimeout(() => {\n      window.open(this.props.feed.itemURL, '_blank', 'location=yes,height=570,width=520,scrollbars=yes,status=yes')\n      this.setState({host: false})}, 200);\n  }\n\n  handleReport(){\n    this.setState({report: true})\n    setTimeout(() => {\n      window.location = `mailto:roigfrey@gmail.com\n                      ?subject=streamHub: I would like to report Item #${this.props.feed.itemID}\n                      &body=I would like to report the event \"${this.props.feed.itemTitle}\". please list the reason for reporting below:`\n                      this.setState({report: false})}, 200);\n  }\n\n  render(){  \n  \n    const { t } = this.props\n\n    const availableCats = [\"kids\",\"lectures\",\"fitness\",\"fun\"]\n    const itemCategoryArr = eval(this.props.feed.itemTags)\n    const itemCategory = itemCategoryArr && availableCats.indexOf(itemCategoryArr[0]) !== -1 ? itemCategoryArr[0] : \"other\"\n    const timeObj = moment(this.props.feed.itemStartDateObj).format(\"DD/MM | HH:mm\")\n    const timeEnd = moment(this.props.feed.itemStartDateObj).add(this.props.feed.itemDuration, \"seconds\").format(\"HH:mm\")\n    const timeLabel = moment(this.props.feed.itemStartDateObj).format(t(\"momenttimelabel\"))\n    const saveState = this.props.userData.savedItems ? this.props.userData.savedItems.includes(this.props.feed.itemID) ? solidStar : faStar : faStar\n\n    return (\n      <div className=\"feed-item\">\n          <img src={this.props.image} alt=\"Event\" className={t(\"lang\") === \"he\" ? \"feed-item-img-rtl\" :\"feed-item-img\"}/>\n          <div className=\"feed-item-title\">\n            <h2 onClick={this.handleHost} className={t(\"lang\") === \"he\" ? \"feed-item-title-h2-rtl\" : \"feed-item-title-h2\"}>{this.props.feed.itemTitle}</h2>\n            <h3>{`${timeObj}-${timeEnd}`}</h3>\n          </div>\n          <div className=\"feed-item-timelabel\" style={{background: this.state.catColor}}>\n            <h2>{timeLabel}</h2>\n          </div>\n          <h2 className=\"feed-item-catlabel\">{t(itemCategory)}</h2>\n          <div className=\"feed-item-description\">\n            <p>{this.props.feed.itemDescription}</p>\n            <a href={this.props.feed.itemURL} target=\"_blank\" rel=\"noopener noreferrer\">{t(\"Link to Live Event\")}</a>\n          </div>\n          <div className=\"feed-item-icons\">\n            <div className=\"feed-item-icons-class\" onClick={this.handleSave} style={this.props.isLoggedIn ? null : {color:\"#c7c7c7\"}}>\n              <FontAwesomeIcon className=\"feed-item-icons-class\" icon={saveState} size=\"lg\" />\n              <h3>{t(\"Save\")}</h3>\n            </div>\n            <div className=\"feed-item-icons-class\" onClick={this.handleShare}>\n              <FontAwesomeIcon className=\"feed-item-icons-class\" icon={this.state.share ? solidShare : faShareSquare} size=\"lg\"/>\n              <h3>{t(\"Share\")}</h3>\n            </div>\n            {/* <div className=\"feed-item-icons-class\" onClick={this.handleHost} style={{color:\"#c7c7c7\"}}>\n              <FontAwesomeIcon className=\"feed-item-icons-class\" icon={this.state.host ? solidUser : faUser} size=\"lg\"/>\n              <h3>{t(\"View Host\")}</h3>\n            </div> */}\n            <div className=\"feed-item-icons-class\" onClick={this.handleReport}>\n              <FontAwesomeIcon className=\"feed-item-icons-class\" icon={this.state.report ? solidFlag : faFlag} size=\"lg\"/>\n              <h3>{t(\"Report\")}</h3>\n            </div>\n            <div className=\"feed-item-icons-counter\">\n              <h2>{this.state.views}</h2>\n              <h3>{t(\"Views\")}</h3>\n            </div>\n            {this.state.share ? <SharePanel item={this.props.feed} image={this.props.image}/> : null}\n          </div>\n      </div>\n    )\n  }\n}\n\nexport default withTranslation()(FeedItem)"]},"metadata":{},"sourceType":"module"}